<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" layout:decorator="/layout/contentsLayout">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!--<script type="text/javascript" src="/js/main/script-main.js"></script>-->
    <link rel="import" href="/html/common/common">
    <!--<script type="text/javascript" src="/js/board/board.js"></script>-->
    <style>
        .maxGridHeigh {
            min-height: 100vh;
            height : 100vh;
        }
    </style>
    <script>

        const markDownDisPlay = (evenet,txt) =>{

            console.log("call");
            if(evenet.key === "Enter"){

            }else if(evenet.key ==="Tab"){
                event.preventDefault();
            }

            let lender = txt.innerText;
            lender = marked(lender).replace(/\n/g, '  \n')
            document.getElementById("test").innerHTML = lender;

        };

        const editkeyDown  = (e,txt) => {

            if (e.key === "Tab") {
                divTab(e);
            } else if (e.key === "Enter") {


            }
        }

        const editKeyPress = (e , id) =>{

            console.log(`${e.keyCode} :: ${id} 입니다`);
        };


        const divTab = (e) => {
            e.preventDefault();
            console.log(e.key);
            let code = event.which || event.keyCode;
            if(code === 9){
                if (!window.getSelection) return;
                const sel = window.getSelection();
                if (!sel.rangeCount) return;
                const range = sel.getRangeAt(0);
                range.collapse(true);
                const span = document.createElement('span');
                span.appendChild(document.createTextNode('\t'));
                span.style.whiteSpace = 'pre';
                range.insertNode(span);

                range.setStartAfter(span);
                range.collapse(true);
                sel.removeAllRanges();
                sel.addRange(range);
            }



        };

        const txtAreaTab  = (e,txt) =>{
           // e.preventDefault();


        };



        window.onload = () => {

            const txt = document.getElementById("txt");

            txt.addEventListener("keyup",(evenet) => markDownDisPlay(evenet,txt),);
            txt.addEventListener("keydown",(e) => editkeyDown(e),);




        };


    </script>



</head>
<body>
<th:block layout:fragment="content">




        <div class="row maxGridHeigh">
            <div class="col-5" id="txt" contentEditable = "true">
                <!--<textarea class="form-control maxGridHeigh" id="txt" style="background-color: black; color: white" ></textarea>-->
            <!--<div id="txt" contenteditable>-->
            </div>
            <!--</div>-->


            <div id ="test" class="col-7">
                반갑
            </div>

        </div>










</th:block>
</body>
</html>

